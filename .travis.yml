language: ruby
cache:
- bundler: true
- directories:
  - "/home/travis/.phantomjs"
before_script:
- createdb test_vgbot
- bundle exec rake db:migrate
script:
- bundle exec rake spec
- export DISPLAY=:99.0 && bundle exec rake jasmine:ci[random]
env:
  global:
  - RAILS_ENV: test
    TRAVIS: true
addons:
  postgresql: 9.3
sudo: false
deploy:
  provider: heroku
  api_key:
    secure: ouaJoU6kEv3kERgmYDjvbD3/ETyaSdmFsiJEypE8a46/DlIZ+88/M+Tc7+Xd6QbWJCb2EVleZUFHNWsMgds7dJ9L9ApKHAXHWif9doeppDZ7WnMnJSMs0+BFdZP4G4Y5cb6RTGA93K+V/6Km8/lm92DLpEWCinoscEZTgObv+H8F0NgqbZvXz/t62QmbMce+EFmvAd+H0paO8JfL57m+adKTNz7dgKhnYnEwXkXK2ouE/Owth1MvFkUq9BG04v+s5piKa4k+1I+N1mo9P8oVYtURmNfc70ES3nQ/LoPz+shybQ+nDd8qh3E7bH6FXA8Chb9nyiwiT4e/p3CWxqiQMcLjyESc70IOLumLEtgMIPnS8MxMmRTFFX+Xdnsm3VgiX9JRXt9o375YtNKa9vDtlE52p6vl6pCAvOREfJ4eEgOB2a+Bx4jVPh4CXEQshE7/kMw0grQmpwal7mtkguhoyHzOibWz6RWM4hJOtOlCJ+jwzti626PvMCktgCibqR2ZPhbr4hY8dqYF+8BD/tJgJgxHMqteKa+tdTTgkJwGZGfP47OVJXoxU9cccVTAGTltTIgS/+KMAglx/ZY4gukuC/74ZUkxI4UrZPjRavlWazhfK4q67RtAfbifLsX2uFt78Vvd4/9Lu2JMAPtz7fiiwgEW93dyCSlkHStRORrNp5A=
  app: voterguidebot
  run:
  - rake db:migrate
  - bundle exec rake render:assets
  on:
    repo: mojowen/voterguidebot
